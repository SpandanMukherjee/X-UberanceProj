{% extends "base.html" %}
{% block content %}
    <h2>Your to-do list</h2>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Add Task</button>
    </form>

    <hr>

    <h3>Pending Tasks:</h3>
    
    {% if tasks %}
        <ul>
            {% for task in tasks %}
                <li>
                    <form action="{% url 'complete_task' task.id %}" method="post" style="display:inline;">
                        {% csrf_token %}
                        <button type="Submit">Mark Done</button>
                    </form>
                    {{ task.title }} - due {{ task.due_date|date:"M d, Y H:i" }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No pending tasks.</p>
    {% endif %}

    <h3> Completed Tasks: </h3>

    {% if completed_tasks %}
        <ul>
            {% for task in completed_tasks %}
                <li>
                    <s> {{ task.title }} </s> - completed, was due {{ task.due_date|date:"M d, Y H:i" }}
                </li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}